{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Jokes{% endblock %}</h1>
  {% if g.user %}
    <a class="action" href="{{ url_for('jokes.leave') }}">Leave a Joke</a>
  {% endif %}
{% endblock %}

{% block content %}
{% for joke in jokes %}
<article class="joke">
  <header>
    <div>
      <h1>{{ joke['title'] }}</h1>
      <div class="about">by {{ joke['username'] }} on {{ joke['created'].strftime('%Y-%m-%d') }}</div>
    </div>
    {% if g.user['id'] == joke['author_id'] %}
      <a class="action" href="{{ url_for('jokes.update', id=joke['id']) }}">Edit</a>
    {% endif %}
  </header>
  <p class="body">{{ joke['body'] }}</p>
</article>
{% if not loop.last %}
  <hr>
{% endif %}
{% endfor %}
{% endblock %}
